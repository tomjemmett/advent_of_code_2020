<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Day 1 Report Repair | Advent of Code 2020</title>
  <meta name="description" content="My attempt to complete AOC 2020 in R" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Day 1 Report Repair | Advent of Code 2020" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="My attempt to complete AOC 2020 in R" />
  <meta name="github-repo" content="tomjemmett/advent-of-code-2020" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Day 1 Report Repair | Advent of Code 2020" />
  
  <meta name="twitter:description" content="My attempt to complete AOC 2020 in R" />
  

<meta name="author" content="Tom Jemmett" />


<meta name="date" content="2020-12-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="password-philosophy.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Advent of Code 2020</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="1" data-path="report-repair.html"><a href="report-repair.html"><i class="fa fa-check"></i><b>1</b> Report Repair</a><ul>
<li class="chapter" data-level="1.1" data-path="report-repair.html"><a href="report-repair.html#part-1"><i class="fa fa-check"></i><b>1.1</b> Part 1</a><ul>
<li class="chapter" data-level="1.1.1" data-path="report-repair.html"><a href="report-repair.html#is-the-improved-algorithm-any-better"><i class="fa fa-check"></i><b>1.1.1</b> is the improved algorithm any better?</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="report-repair.html"><a href="report-repair.html#part-2"><i class="fa fa-check"></i><b>1.2</b> Part 2</a><ul>
<li class="chapter" data-level="1.2.1" data-path="report-repair.html"><a href="report-repair.html#is-our-improved-algorithm-better-this-time"><i class="fa fa-check"></i><b>1.2.1</b> Is our improved algorithm better this time?</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="report-repair.html"><a href="report-repair.html#extra-implementing-in-python"><i class="fa fa-check"></i><b>1.3</b> Extra: Implementing in Python</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="password-philosophy.html"><a href="password-philosophy.html"><i class="fa fa-check"></i><b>2</b> Password Philosophy</a><ul>
<li class="chapter" data-level="2.1" data-path="password-philosophy.html"><a href="password-philosophy.html#part-1-1"><i class="fa fa-check"></i><b>2.1</b> Part 1</a></li>
<li class="chapter" data-level="2.2" data-path="password-philosophy.html"><a href="password-philosophy.html#part-2-1"><i class="fa fa-check"></i><b>2.2</b> Part 2</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="toboggan-trajectory.html"><a href="toboggan-trajectory.html"><i class="fa fa-check"></i><b>3</b> Toboggan Trajectory</a><ul>
<li class="chapter" data-level="3.1" data-path="toboggan-trajectory.html"><a href="toboggan-trajectory.html#part-1-2"><i class="fa fa-check"></i><b>3.1</b> Part 1</a></li>
<li class="chapter" data-level="3.2" data-path="toboggan-trajectory.html"><a href="toboggan-trajectory.html#part-2-2"><i class="fa fa-check"></i><b>3.2</b> Part 2</a></li>
<li class="chapter" data-level="3.3" data-path="toboggan-trajectory.html"><a href="toboggan-trajectory.html#extra-is-there-a-path-that-minimises-the-number-of-trees-you-encounter"><i class="fa fa-check"></i><b>3.3</b> Extra: Is there a path that minimises the number of trees you encounter?</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="passport-processing.html"><a href="passport-processing.html"><i class="fa fa-check"></i><b>4</b> Passport Processing</a><ul>
<li class="chapter" data-level="4.1" data-path="passport-processing.html"><a href="passport-processing.html#part-1-3"><i class="fa fa-check"></i><b>4.1</b> Part 1</a></li>
<li class="chapter" data-level="4.2" data-path="passport-processing.html"><a href="passport-processing.html#part-2-3"><i class="fa fa-check"></i><b>4.2</b> Part 2</a></li>
<li class="chapter" data-level="4.3" data-path="passport-processing.html"><a href="passport-processing.html#extra-solving-with-regular-expressions"><i class="fa fa-check"></i><b>4.3</b> Extra: Solving with regular expressions</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="binary-boarding.html"><a href="binary-boarding.html"><i class="fa fa-check"></i><b>5</b> Binary Boarding</a><ul>
<li class="chapter" data-level="5.1" data-path="binary-boarding.html"><a href="binary-boarding.html#part-1-4"><i class="fa fa-check"></i><b>5.1</b> Part 1</a></li>
<li class="chapter" data-level="5.2" data-path="binary-boarding.html"><a href="binary-boarding.html#part-2-4"><i class="fa fa-check"></i><b>5.2</b> Part 2</a></li>
<li class="chapter" data-level="5.3" data-path="binary-boarding.html"><a href="binary-boarding.html#extra-solving-algebraicly"><i class="fa fa-check"></i><b>5.3</b> Extra: Solving algebraicly</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="custom-customs.html"><a href="custom-customs.html"><i class="fa fa-check"></i><b>6</b> Custom Customs</a><ul>
<li class="chapter" data-level="6.1" data-path="custom-customs.html"><a href="custom-customs.html#part-1-5"><i class="fa fa-check"></i><b>6.1</b> Part 1</a></li>
<li class="chapter" data-level="6.2" data-path="custom-customs.html"><a href="custom-customs.html#part-2-5"><i class="fa fa-check"></i><b>6.2</b> Part 2</a></li>
<li class="chapter" data-level="6.3" data-path="custom-customs.html"><a href="custom-customs.html#extra-solving-part-1-2-with-set-functions"><i class="fa fa-check"></i><b>6.3</b> Extra: solving part 1 &amp; 2 with set functions</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="handy-haversacks.html"><a href="handy-haversacks.html"><i class="fa fa-check"></i><b>7</b> Handy Haversacks</a><ul>
<li class="chapter" data-level="7.1" data-path="handy-haversacks.html"><a href="handy-haversacks.html#part-1-6"><i class="fa fa-check"></i><b>7.1</b> Part 1</a></li>
<li class="chapter" data-level="7.2" data-path="handy-haversacks.html"><a href="handy-haversacks.html#part-2-6"><i class="fa fa-check"></i><b>7.2</b> Part 2</a></li>
<li class="chapter" data-level="7.3" data-path="handy-haversacks.html"><a href="handy-haversacks.html#extra-alternative-solution-to-part-2"><i class="fa fa-check"></i><b>7.3</b> Extra: alternative solution to part 2</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="handheld-halting.html"><a href="handheld-halting.html"><i class="fa fa-check"></i><b>8</b> Handheld Halting</a><ul>
<li class="chapter" data-level="8.1" data-path="handheld-halting.html"><a href="handheld-halting.html#part-1-7"><i class="fa fa-check"></i><b>8.1</b> Part 1</a></li>
<li class="chapter" data-level="8.2" data-path="handheld-halting.html"><a href="handheld-halting.html#part-2-7"><i class="fa fa-check"></i><b>8.2</b> Part 2</a></li>
<li class="chapter" data-level="8.3" data-path="handheld-halting.html"><a href="handheld-halting.html#extra-update-the-computer-class"><i class="fa fa-check"></i><b>8.3</b> Extra: update the computer class</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="encoding-error.html"><a href="encoding-error.html"><i class="fa fa-check"></i><b>9</b> Encoding Error</a><ul>
<li class="chapter" data-level="9.1" data-path="encoding-error.html"><a href="encoding-error.html#part-1-8"><i class="fa fa-check"></i><b>9.1</b> Part 1</a></li>
<li class="chapter" data-level="9.2" data-path="encoding-error.html"><a href="encoding-error.html#part-2-8"><i class="fa fa-check"></i><b>9.2</b> Part 2</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="adapter-array.html"><a href="adapter-array.html"><i class="fa fa-check"></i><b>10</b> Adapter Array</a><ul>
<li class="chapter" data-level="10.1" data-path="adapter-array.html"><a href="adapter-array.html#part-1-9"><i class="fa fa-check"></i><b>10.1</b> Part 1</a></li>
<li class="chapter" data-level="10.2" data-path="adapter-array.html"><a href="adapter-array.html#part-2-9"><i class="fa fa-check"></i><b>10.2</b> Part 2</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="seating-system.html"><a href="seating-system.html"><i class="fa fa-check"></i><b>11</b> Seating System</a><ul>
<li class="chapter" data-level="11.1" data-path="seating-system.html"><a href="seating-system.html#part-1-10"><i class="fa fa-check"></i><b>11.1</b> Part 1</a></li>
<li class="chapter" data-level="11.2" data-path="seating-system.html"><a href="seating-system.html#part-2-10"><i class="fa fa-check"></i><b>11.2</b> Part 2</a></li>
<li class="chapter" data-level="11.3" data-path="seating-system.html"><a href="seating-system.html#solving-faster"><i class="fa fa-check"></i><b>11.3</b> Solving faster</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="rain-risk.html"><a href="rain-risk.html"><i class="fa fa-check"></i><b>12</b> Rain Risk</a><ul>
<li class="chapter" data-level="12.1" data-path="rain-risk.html"><a href="rain-risk.html#part-1-11"><i class="fa fa-check"></i><b>12.1</b> Part 1</a></li>
<li class="chapter" data-level="12.2" data-path="rain-risk.html"><a href="rain-risk.html#part-2-11"><i class="fa fa-check"></i><b>12.2</b> Part 2</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="shuttle-search.html"><a href="shuttle-search.html"><i class="fa fa-check"></i><b>13</b> Shuttle Search</a><ul>
<li class="chapter" data-level="13.1" data-path="shuttle-search.html"><a href="shuttle-search.html#part-1-12"><i class="fa fa-check"></i><b>13.1</b> Part 1</a></li>
<li class="chapter" data-level="13.2" data-path="shuttle-search.html"><a href="shuttle-search.html#part-2-12"><i class="fa fa-check"></i><b>13.2</b> Part 2</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="docking-data.html"><a href="docking-data.html"><i class="fa fa-check"></i><b>14</b> Docking Data</a><ul>
<li class="chapter" data-level="14.1" data-path="docking-data.html"><a href="docking-data.html#part-1-13"><i class="fa fa-check"></i><b>14.1</b> Part 1</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="part-2-13.html"><a href="part-2-13.html"><i class="fa fa-check"></i><b>15</b> Part 2</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Advent of Code 2020</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="report-repair" class="section level1">
<h1><span class="header-section-number">Day 1</span> Report Repair</h1>
<p>This is my attempt to solve <a href="https://adventofcode.com/2020/day/1">Day 1</a>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="report-repair.html#cb1-1"></a>sample &lt;-<span class="st"> </span><span class="kw">read_lines</span>(<span class="st">&quot;samples/day_01_sample.txt&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.integer</span>()</span>
<span id="cb1-2"><a href="report-repair.html#cb1-2"></a>actual &lt;-<span class="st"> </span><span class="kw">read_lines</span>(<span class="st">&quot;inputs/day_01_input.txt&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.integer</span>()</span></code></pre></div>
<div id="part-1" class="section level2">
<h2><span class="header-section-number">1.1</span> Part 1</h2>
<p>The naive approach to solving today’s problem is to simple loop through the list twice, checking to see if the condition
is met. If it is, immediately return that value. If we reach the end of both loops without finding the solution we can
return NULL to indicate no result found.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="report-repair.html#cb2-1"></a>part_<span class="dv">1</span>_naive &lt;-<span class="st"> </span><span class="cf">function</span>(input, target) {</span>
<span id="cb2-2"><a href="report-repair.html#cb2-2"></a>  <span class="cf">if</span> (<span class="kw">length</span>(input) <span class="op">==</span><span class="st"> </span><span class="dv">0</span>) <span class="kw">stop</span>(<span class="st">&quot;empty list&quot;</span>)</span>
<span id="cb2-3"><a href="report-repair.html#cb2-3"></a>  </span>
<span id="cb2-4"><a href="report-repair.html#cb2-4"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>(<span class="kw">length</span>(input)<span class="op">-</span><span class="dv">1</span>)) {</span>
<span id="cb2-5"><a href="report-repair.html#cb2-5"></a>    <span class="cf">for</span> (j <span class="cf">in</span> (i<span class="op">+</span><span class="dv">1</span>)<span class="op">:</span><span class="kw">length</span>(input)) {</span>
<span id="cb2-6"><a href="report-repair.html#cb2-6"></a>      <span class="cf">if</span> (input[[i]] <span class="op">+</span><span class="st"> </span>input[[j]] <span class="op">==</span><span class="st"> </span>target)</span>
<span id="cb2-7"><a href="report-repair.html#cb2-7"></a>        <span class="kw">return</span> (input[[i]] <span class="op">*</span><span class="st"> </span>input[[j]])</span>
<span id="cb2-8"><a href="report-repair.html#cb2-8"></a>    }</span>
<span id="cb2-9"><a href="report-repair.html#cb2-9"></a>  }</span>
<span id="cb2-10"><a href="report-repair.html#cb2-10"></a>  <span class="ot">NULL</span></span>
<span id="cb2-11"><a href="report-repair.html#cb2-11"></a>}</span></code></pre></div>
<p>We can test that this method works:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="report-repair.html#cb3-1"></a><span class="kw">part_1_naive</span>(sample, <span class="dv">2020</span>) <span class="op">==</span><span class="st"> </span><span class="dv">514579</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>This approach could be improved, we can sort the list, then create two pointers: the start and end of the list. If we
add these two numbers up and exceed the target then we can decrease the higher number pointer. If the number is lower
that the target we increase the lower number pointer.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="report-repair.html#cb5-1"></a>part_<span class="dv">1</span>_improved &lt;-<span class="st"> </span><span class="cf">function</span>(input, target) {</span>
<span id="cb5-2"><a href="report-repair.html#cb5-2"></a>  <span class="cf">if</span> (<span class="kw">length</span>(input) <span class="op">==</span><span class="st"> </span><span class="dv">0</span>) <span class="kw">stop</span>(<span class="st">&quot;empty list&quot;</span>)</span>
<span id="cb5-3"><a href="report-repair.html#cb5-3"></a>  </span>
<span id="cb5-4"><a href="report-repair.html#cb5-4"></a>  i &lt;-<span class="st"> </span><span class="dv">1</span></span>
<span id="cb5-5"><a href="report-repair.html#cb5-5"></a>  j &lt;-<span class="st"> </span><span class="kw">length</span>(input)</span>
<span id="cb5-6"><a href="report-repair.html#cb5-6"></a>  </span>
<span id="cb5-7"><a href="report-repair.html#cb5-7"></a>  input &lt;-<span class="st"> </span><span class="kw">sort</span>(input)</span>
<span id="cb5-8"><a href="report-repair.html#cb5-8"></a>  </span>
<span id="cb5-9"><a href="report-repair.html#cb5-9"></a>  <span class="cf">while</span> (i <span class="op">&lt;=</span><span class="st"> </span>j) {</span>
<span id="cb5-10"><a href="report-repair.html#cb5-10"></a>    v &lt;-<span class="st"> </span>input[[i]] <span class="op">+</span><span class="st"> </span>input[[j]]</span>
<span id="cb5-11"><a href="report-repair.html#cb5-11"></a>    <span class="cf">if</span> (v <span class="op">==</span><span class="st"> </span>target) {</span>
<span id="cb5-12"><a href="report-repair.html#cb5-12"></a>      <span class="kw">return</span> (input[[i]] <span class="op">*</span><span class="st"> </span>input[[j]])</span>
<span id="cb5-13"><a href="report-repair.html#cb5-13"></a>    } <span class="cf">else</span> <span class="cf">if</span> (v <span class="op">&lt;</span><span class="st"> </span>target) {</span>
<span id="cb5-14"><a href="report-repair.html#cb5-14"></a>      i &lt;-<span class="st"> </span>i <span class="op">+</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb5-15"><a href="report-repair.html#cb5-15"></a>    } <span class="cf">else</span> {</span>
<span id="cb5-16"><a href="report-repair.html#cb5-16"></a>      j &lt;-<span class="st"> </span>j <span class="op">-</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb5-17"><a href="report-repair.html#cb5-17"></a>    }</span>
<span id="cb5-18"><a href="report-repair.html#cb5-18"></a>  }</span>
<span id="cb5-19"><a href="report-repair.html#cb5-19"></a>  </span>
<span id="cb5-20"><a href="report-repair.html#cb5-20"></a>  <span class="ot">NULL</span></span>
<span id="cb5-21"><a href="report-repair.html#cb5-21"></a>}</span></code></pre></div>
<p>Again, we can test that this method works.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="report-repair.html#cb6-1"></a><span class="kw">part_1_improved</span>(sample, <span class="dv">2020</span>) <span class="op">==</span><span class="st"> </span><span class="dv">514579</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>We can now use our improved algorithm to get the result for part 1:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="report-repair.html#cb8-1"></a><span class="kw">part_1_improved</span>(actual, <span class="dv">2020</span>)</span></code></pre></div>
<pre><code>## [1] 793524</code></pre>
<div id="is-the-improved-algorithm-any-better" class="section level3">
<h3><span class="header-section-number">1.1.1</span> is the improved algorithm any better?</h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="report-repair.html#cb10-1"></a>bench<span class="op">::</span><span class="kw">mark</span>(<span class="kw">part_1_naive</span>(sample, <span class="dv">2020</span>),</span>
<span id="cb10-2"><a href="report-repair.html#cb10-2"></a>            <span class="kw">part_1_improved</span>(sample, <span class="dv">2020</span>))</span></code></pre></div>
<pre><code>## # A tibble: 2 x 6
##   expression                         min   median `itr/sec` mem_alloc `gc/sec`
##   &lt;bch:expr&gt;                    &lt;bch:tm&gt; &lt;bch:tm&gt;     &lt;dbl&gt; &lt;bch:byt&gt;    &lt;dbl&gt;
## 1 part_1_naive(sample, 2020)      2.69µs   3.27µs   282963.        0B     28.3
## 2 part_1_improved(sample, 2020)  61.25µs  64.85µs    15115.        0B     17.0</code></pre>
<p>For me, the improved algorithm actually takes longer on the sample data! This is because the improved algorithm has to
sort the data, which is costly, and then it performs far more comparisons per iteration.</p>
<p>However, when we have more data, these extra steps lead to big improvements, as can be seen when running with the actual
data.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="report-repair.html#cb12-1"></a>bench<span class="op">::</span><span class="kw">mark</span>(<span class="kw">part_1_naive</span>(actual, <span class="dv">2020</span>),</span>
<span id="cb12-2"><a href="report-repair.html#cb12-2"></a>            <span class="kw">part_1_improved</span>(actual, <span class="dv">2020</span>))</span></code></pre></div>
<pre><code>## # A tibble: 2 x 6
##   expression                         min   median `itr/sec` mem_alloc `gc/sec`
##   &lt;bch:expr&gt;                    &lt;bch:tm&gt; &lt;bch:tm&gt;     &lt;dbl&gt; &lt;bch:byt&gt;    &lt;dbl&gt;
## 1 part_1_naive(actual, 2020)       699µs  706.7µs     1404.        0B     2.02
## 2 part_1_improved(actual, 2020)     84µs   88.5µs    11092.    1.66KB    14.9</code></pre>
<p>The improved algorithm was roughly 10x faster for me on the actual data.</p>
</div>
</div>
<div id="part-2" class="section level2">
<h2><span class="header-section-number">1.2</span> Part 2</h2>
<p>We can alter the naive approach from part 1 by adding in an extra for loop.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="report-repair.html#cb14-1"></a>part_<span class="dv">2</span>_naive &lt;-<span class="st"> </span><span class="cf">function</span>(input, target) {</span>
<span id="cb14-2"><a href="report-repair.html#cb14-2"></a>  <span class="cf">if</span> (<span class="kw">length</span>(input) <span class="op">==</span><span class="st"> </span><span class="dv">0</span>) <span class="kw">stop</span>(<span class="st">&quot;empty list&quot;</span>)</span>
<span id="cb14-3"><a href="report-repair.html#cb14-3"></a>  </span>
<span id="cb14-4"><a href="report-repair.html#cb14-4"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>(<span class="kw">length</span>(input) <span class="op">-</span><span class="st"> </span><span class="dv">2</span>)) {</span>
<span id="cb14-5"><a href="report-repair.html#cb14-5"></a>    <span class="cf">for</span> (j <span class="cf">in</span> (i <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)<span class="op">:</span>(<span class="kw">length</span>(input) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)) {</span>
<span id="cb14-6"><a href="report-repair.html#cb14-6"></a>      <span class="cf">for</span> (k <span class="cf">in</span> (j <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)<span class="op">:</span><span class="kw">length</span>(input)) {</span>
<span id="cb14-7"><a href="report-repair.html#cb14-7"></a>        <span class="cf">if</span> (input[[i]] <span class="op">+</span><span class="st"> </span>input[[j]] <span class="op">+</span><span class="st"> </span>input[[k]] <span class="op">==</span><span class="st"> </span>target)</span>
<span id="cb14-8"><a href="report-repair.html#cb14-8"></a>          <span class="kw">return</span> (<span class="kw">prod</span>(input[<span class="kw">c</span>(i, j, k)]))</span>
<span id="cb14-9"><a href="report-repair.html#cb14-9"></a>      }</span>
<span id="cb14-10"><a href="report-repair.html#cb14-10"></a>    }</span>
<span id="cb14-11"><a href="report-repair.html#cb14-11"></a>  }</span>
<span id="cb14-12"><a href="report-repair.html#cb14-12"></a>  <span class="ot">NULL</span></span>
<span id="cb14-13"><a href="report-repair.html#cb14-13"></a>}</span></code></pre></div>
<p>Again, we can test that this method works on the sample.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="report-repair.html#cb15-1"></a><span class="kw">part_2_naive</span>(sample, <span class="dv">2020</span>) <span class="op">==</span><span class="st"> </span><span class="dv">241861950</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>It’s much harder to adapt the improved algorithm though. My best approach involves a <a href="https://en.wikipedia.org/wiki/Binary_search_algorithm">binary search</a>.</p>
<p>This function takes a sorted array, a target value, a current index into the array, and the current min/max extents to
search. If the value at position i in array is less than target, we look in the left half of the array, chopping it in
half by reducing max. Likewise, if the value is greater than target, we look in the right half of the array, chopping it
in half by increasing min.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="report-repair.html#cb17-1"></a>binary_search &lt;-<span class="st"> </span><span class="cf">function</span>(arr, target, i, min, max) {</span>
<span id="cb17-2"><a href="report-repair.html#cb17-2"></a>  <span class="cf">if</span> (arr[[i]] <span class="op">==</span><span class="st"> </span>target) {</span>
<span id="cb17-3"><a href="report-repair.html#cb17-3"></a>    <span class="kw">return</span>(i)</span>
<span id="cb17-4"><a href="report-repair.html#cb17-4"></a>  } <span class="cf">else</span> <span class="cf">if</span> (target <span class="op">&lt;</span><span class="st"> </span>arr[[i]]) {</span>
<span id="cb17-5"><a href="report-repair.html#cb17-5"></a>    max &lt;-<span class="st"> </span>i</span>
<span id="cb17-6"><a href="report-repair.html#cb17-6"></a>    ni &lt;-<span class="st"> </span>(min <span class="op">+</span><span class="st"> </span>i) <span class="op">%/%</span><span class="st"> </span><span class="dv">2</span></span>
<span id="cb17-7"><a href="report-repair.html#cb17-7"></a>  } <span class="cf">else</span> {</span>
<span id="cb17-8"><a href="report-repair.html#cb17-8"></a>    min &lt;-<span class="st"> </span>i</span>
<span id="cb17-9"><a href="report-repair.html#cb17-9"></a>    ni &lt;-<span class="st"> </span>(max <span class="op">+</span><span class="st"> </span>i) <span class="op">%/%</span><span class="st"> </span><span class="dv">2</span></span>
<span id="cb17-10"><a href="report-repair.html#cb17-10"></a>  }</span>
<span id="cb17-11"><a href="report-repair.html#cb17-11"></a>  </span>
<span id="cb17-12"><a href="report-repair.html#cb17-12"></a>  <span class="cf">if</span> (ni <span class="op">==</span><span class="st"> </span>i) {</span>
<span id="cb17-13"><a href="report-repair.html#cb17-13"></a>    <span class="ot">NULL</span></span>
<span id="cb17-14"><a href="report-repair.html#cb17-14"></a>  } <span class="cf">else</span> {</span>
<span id="cb17-15"><a href="report-repair.html#cb17-15"></a>    <span class="kw">binary_search</span>(arr, target, ni, min, max)</span>
<span id="cb17-16"><a href="report-repair.html#cb17-16"></a>  }</span>
<span id="cb17-17"><a href="report-repair.html#cb17-17"></a>}</span></code></pre></div>
<p>Our improved algorithm for part 2 involves creating two for loops to search from the end of the (sorted) input. We then
remove the third loop by using a binary search to find the target value quicker.</p>
<p>In the two for loops we first calculate the value of the adding these two items together, quickly checking to see if
there is a possible solution (and exiting early if not). Then, we perform a binary search on the rest of the array for
the amount required to make <code>v</code> equal <code>target</code> (2020). If we find the value, then we simply return the results. Else we
continue the search by looping.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="report-repair.html#cb18-1"></a>part_<span class="dv">2</span>_improved &lt;-<span class="st"> </span><span class="cf">function</span>(input, target) {</span>
<span id="cb18-2"><a href="report-repair.html#cb18-2"></a>  <span class="cf">if</span> (<span class="kw">length</span>(input) <span class="op">==</span><span class="st"> </span><span class="dv">0</span>) <span class="kw">stop</span>(<span class="st">&quot;empty list&quot;</span>)</span>
<span id="cb18-3"><a href="report-repair.html#cb18-3"></a>  </span>
<span id="cb18-4"><a href="report-repair.html#cb18-4"></a>  input &lt;-<span class="st"> </span><span class="kw">sort</span>(input)</span>
<span id="cb18-5"><a href="report-repair.html#cb18-5"></a>  </span>
<span id="cb18-6"><a href="report-repair.html#cb18-6"></a>  <span class="cf">for</span> (j <span class="cf">in</span> <span class="kw">length</span>(input)<span class="op">:</span><span class="dv">3</span>) {</span>
<span id="cb18-7"><a href="report-repair.html#cb18-7"></a>    <span class="cf">for</span> (i <span class="cf">in</span> (j <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)<span class="op">:</span><span class="dv">2</span>) {</span>
<span id="cb18-8"><a href="report-repair.html#cb18-8"></a>      v &lt;-<span class="st"> </span><span class="kw">sum</span>(input[<span class="kw">c</span>(i, j)])</span>
<span id="cb18-9"><a href="report-repair.html#cb18-9"></a>      <span class="co"># early termination</span></span>
<span id="cb18-10"><a href="report-repair.html#cb18-10"></a>      <span class="cf">if</span> (v <span class="op">&gt;=</span><span class="st"> </span>target) <span class="cf">next</span>()</span>
<span id="cb18-11"><a href="report-repair.html#cb18-11"></a>      <span class="cf">if</span> (v <span class="op">+</span><span class="st"> </span>input[[i <span class="op">-</span><span class="st"> </span><span class="dv">1</span>]] <span class="op">&lt;</span><span class="st"> </span>target) <span class="cf">next</span>()</span>
<span id="cb18-12"><a href="report-repair.html#cb18-12"></a>      </span>
<span id="cb18-13"><a href="report-repair.html#cb18-13"></a>      <span class="co"># binary search for a suitable value</span></span>
<span id="cb18-14"><a href="report-repair.html#cb18-14"></a>      k &lt;-<span class="st"> </span><span class="kw">binary_search</span>(input, target <span class="op">-</span><span class="st"> </span>v, (i <span class="op">+</span><span class="st"> </span><span class="dv">1</span>) <span class="op">%/%</span><span class="st"> </span><span class="dv">2</span>, <span class="dv">1</span>, (i <span class="op">-</span><span class="st"> </span><span class="dv">1</span>))</span>
<span id="cb18-15"><a href="report-repair.html#cb18-15"></a>      <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(k)) {</span>
<span id="cb18-16"><a href="report-repair.html#cb18-16"></a>        <span class="kw">return</span> (<span class="kw">prod</span>(input[<span class="kw">c</span>(i, j, k)]))</span>
<span id="cb18-17"><a href="report-repair.html#cb18-17"></a>      }</span>
<span id="cb18-18"><a href="report-repair.html#cb18-18"></a>    }</span>
<span id="cb18-19"><a href="report-repair.html#cb18-19"></a>  }</span>
<span id="cb18-20"><a href="report-repair.html#cb18-20"></a>  </span>
<span id="cb18-21"><a href="report-repair.html#cb18-21"></a>  <span class="ot">NULL</span></span>
<span id="cb18-22"><a href="report-repair.html#cb18-22"></a>}</span></code></pre></div>
<p>We can once again test that our method works on the sample data:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="report-repair.html#cb19-1"></a><span class="kw">part_2_improved</span>(sample, <span class="dv">2020</span>) <span class="op">==</span><span class="st"> </span><span class="dv">241861950</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>We can now run both approaches to see what the result is:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="report-repair.html#cb21-1"></a><span class="kw">part_2_naive</span>(actual, <span class="dv">2020</span>)</span></code></pre></div>
<pre><code>## [1] 61515678</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="report-repair.html#cb23-1"></a><span class="kw">part_2_improved</span>(actual, <span class="dv">2020</span>)</span></code></pre></div>
<pre><code>## [1] 61515678</code></pre>
<div id="is-our-improved-algorithm-better-this-time" class="section level3">
<h3><span class="header-section-number">1.2.1</span> Is our improved algorithm better this time?</h3>
<p>Once again, we can benchmark the two approaches.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="report-repair.html#cb25-1"></a>bench<span class="op">::</span><span class="kw">mark</span>(<span class="kw">part_2_naive</span>(actual, <span class="dv">2020</span>),</span>
<span id="cb25-2"><a href="report-repair.html#cb25-2"></a>            <span class="kw">part_2_improved</span>(actual, <span class="dv">2020</span>))</span></code></pre></div>
<pre><code>## # A tibble: 2 x 6
##   expression                         min   median `itr/sec` mem_alloc `gc/sec`
##   &lt;bch:expr&gt;                    &lt;bch:tm&gt; &lt;bch:tm&gt;     &lt;dbl&gt; &lt;bch:byt&gt;    &lt;dbl&gt;
## 1 part_2_naive(actual, 2020)     110.9ms  113.8ms      8.83        0B     5.89
## 2 part_2_improved(actual, 2020)   14.8ms   14.8ms     67.0     1.66KB   402.</code></pre>
<p>On my machine the improved approach is again about 10x quicker.</p>
</div>
</div>
<div id="extra-implementing-in-python" class="section level2">
<h2><span class="header-section-number">1.3</span> Extra: Implementing in Python</h2>
<p>I wanted to have a go at implementing my improved algorithm in python, but we can take advantage of sets to get even
better performance and do away with the need to sort the list and perform binary search (asking if a value is in a set
is a constant time operation in python - it’s near instantaneous).</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="report-repair.html#cb27-1"></a><span class="kw">library</span>(reticulate)</span></code></pre></div>
<div class="sourceCode" id="cb28"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb28-1"><a href="report-repair.html#cb28-1"></a><span class="kw">def</span> part_2_py(input_values, target):</span>
<span id="cb28-2"><a href="report-repair.html#cb28-2"></a>  <span class="co"># convert the </span></span>
<span id="cb28-3"><a href="report-repair.html#cb28-3"></a>  s <span class="op">=</span> { i <span class="cf">for</span> i <span class="kw">in</span> input_values }</span>
<span id="cb28-4"><a href="report-repair.html#cb28-4"></a>  </span>
<span id="cb28-5"><a href="report-repair.html#cb28-5"></a>  <span class="co"># outer loop: we need to have at least 3 items to check</span></span>
<span id="cb28-6"><a href="report-repair.html#cb28-6"></a>  <span class="cf">while</span> <span class="bu">len</span>(s) <span class="op">&gt;</span> <span class="dv">2</span>:</span>
<span id="cb28-7"><a href="report-repair.html#cb28-7"></a>    <span class="co"># remove a value from the set</span></span>
<span id="cb28-8"><a href="report-repair.html#cb28-8"></a>    j <span class="op">=</span> s.pop()</span>
<span id="cb28-9"><a href="report-repair.html#cb28-9"></a>    <span class="co"># take a copy of the set: if we don&#39;t find a solution for j then we need to</span></span>
<span id="cb28-10"><a href="report-repair.html#cb28-10"></a>    <span class="co"># continue with the set as it was at this point</span></span>
<span id="cb28-11"><a href="report-repair.html#cb28-11"></a>    t <span class="op">=</span> s.copy()</span>
<span id="cb28-12"><a href="report-repair.html#cb28-12"></a>    <span class="cf">while</span> <span class="bu">len</span>(t) <span class="op">&gt;</span> <span class="dv">1</span>:</span>
<span id="cb28-13"><a href="report-repair.html#cb28-13"></a>      <span class="co"># remove a value from the copied set</span></span>
<span id="cb28-14"><a href="report-repair.html#cb28-14"></a>      i <span class="op">=</span> t.pop()</span>
<span id="cb28-15"><a href="report-repair.html#cb28-15"></a>      <span class="co"># the value to reach the target</span></span>
<span id="cb28-16"><a href="report-repair.html#cb28-16"></a>      k <span class="op">=</span> target <span class="op">-</span> i <span class="op">-</span> j</span>
<span id="cb28-17"><a href="report-repair.html#cb28-17"></a>      <span class="co"># is k in the set? I.e. does i + j + k == target?</span></span>
<span id="cb28-18"><a href="report-repair.html#cb28-18"></a>      <span class="cf">if</span> k <span class="kw">in</span> t:</span>
<span id="cb28-19"><a href="report-repair.html#cb28-19"></a>        <span class="cf">return</span> i <span class="op">*</span> j <span class="op">*</span> k</span>
<span id="cb28-20"><a href="report-repair.html#cb28-20"></a>  <span class="co"># no solution, return none</span></span>
<span id="cb28-21"><a href="report-repair.html#cb28-21"></a>  <span class="cf">return</span> none</span></code></pre></div>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="report-repair.html#cb29-1"></a>bench<span class="op">::</span><span class="kw">mark</span>(<span class="kw">part_2_improved</span>(actual, <span class="dv">2020</span>),</span>
<span id="cb29-2"><a href="report-repair.html#cb29-2"></a>            py<span class="op">$</span><span class="kw">part_2_py</span>(actual, <span class="dv">2020</span>))</span></code></pre></div>
<pre><code>## # A tibble: 2 x 6
##   expression                         min   median `itr/sec` mem_alloc `gc/sec`
##   &lt;bch:expr&gt;                    &lt;bch:tm&gt; &lt;bch:tm&gt;     &lt;dbl&gt; &lt;bch:byt&gt;    &lt;dbl&gt;
## 1 part_2_improved(actual, 2020)  14.87ms   15.2ms      65.0    1.66KB     38.2
## 2 py$part_2_py(actual, 2020)      1.26ms    1.3ms     752.    17.45KB      0</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="password-philosophy.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
