<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Day 18 Operation Order | Advent of Code 2020</title>
  <meta name="description" content="My attempt to complete AOC 2020 in R" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Day 18 Operation Order | Advent of Code 2020" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="My attempt to complete AOC 2020 in R" />
  <meta name="github-repo" content="tomjemmett/advent-of-code-2020" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Day 18 Operation Order | Advent of Code 2020" />
  
  <meta name="twitter:description" content="My attempt to complete AOC 2020 in R" />
  

<meta name="author" content="Tom Jemmett" />


<meta name="date" content="2020-12-30" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="conway-cubes.html"/>
<link rel="next" href="monster-messages.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Advent of Code 2020</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="1" data-path="report-repair.html"><a href="report-repair.html"><i class="fa fa-check"></i><b>1</b> Report Repair</a><ul>
<li class="chapter" data-level="1.1" data-path="report-repair.html"><a href="report-repair.html#part-1"><i class="fa fa-check"></i><b>1.1</b> Part 1</a><ul>
<li class="chapter" data-level="1.1.1" data-path="report-repair.html"><a href="report-repair.html#is-the-improved-algorithm-any-better"><i class="fa fa-check"></i><b>1.1.1</b> is the improved algorithm any better?</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="report-repair.html"><a href="report-repair.html#part-2"><i class="fa fa-check"></i><b>1.2</b> Part 2</a><ul>
<li class="chapter" data-level="1.2.1" data-path="report-repair.html"><a href="report-repair.html#is-our-improved-algorithm-better-this-time"><i class="fa fa-check"></i><b>1.2.1</b> Is our improved algorithm better this time?</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="report-repair.html"><a href="report-repair.html#extra-implementing-in-python"><i class="fa fa-check"></i><b>1.3</b> Extra: Implementing in Python</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="password-philosophy.html"><a href="password-philosophy.html"><i class="fa fa-check"></i><b>2</b> Password Philosophy</a><ul>
<li class="chapter" data-level="2.1" data-path="password-philosophy.html"><a href="password-philosophy.html#part-1-1"><i class="fa fa-check"></i><b>2.1</b> Part 1</a></li>
<li class="chapter" data-level="2.2" data-path="password-philosophy.html"><a href="password-philosophy.html#part-2-1"><i class="fa fa-check"></i><b>2.2</b> Part 2</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="toboggan-trajectory.html"><a href="toboggan-trajectory.html"><i class="fa fa-check"></i><b>3</b> Toboggan Trajectory</a><ul>
<li class="chapter" data-level="3.1" data-path="toboggan-trajectory.html"><a href="toboggan-trajectory.html#part-1-2"><i class="fa fa-check"></i><b>3.1</b> Part 1</a></li>
<li class="chapter" data-level="3.2" data-path="toboggan-trajectory.html"><a href="toboggan-trajectory.html#part-2-2"><i class="fa fa-check"></i><b>3.2</b> Part 2</a></li>
<li class="chapter" data-level="3.3" data-path="toboggan-trajectory.html"><a href="toboggan-trajectory.html#extra-is-there-a-path-that-minimises-the-number-of-trees-you-encounter"><i class="fa fa-check"></i><b>3.3</b> Extra: Is there a path that minimises the number of trees you encounter?</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="passport-processing.html"><a href="passport-processing.html"><i class="fa fa-check"></i><b>4</b> Passport Processing</a><ul>
<li class="chapter" data-level="4.1" data-path="passport-processing.html"><a href="passport-processing.html#part-1-3"><i class="fa fa-check"></i><b>4.1</b> Part 1</a></li>
<li class="chapter" data-level="4.2" data-path="passport-processing.html"><a href="passport-processing.html#part-2-3"><i class="fa fa-check"></i><b>4.2</b> Part 2</a></li>
<li class="chapter" data-level="4.3" data-path="passport-processing.html"><a href="passport-processing.html#extra-solving-with-regular-expressions"><i class="fa fa-check"></i><b>4.3</b> Extra: Solving with regular expressions</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="binary-boarding.html"><a href="binary-boarding.html"><i class="fa fa-check"></i><b>5</b> Binary Boarding</a><ul>
<li class="chapter" data-level="5.1" data-path="binary-boarding.html"><a href="binary-boarding.html#part-1-4"><i class="fa fa-check"></i><b>5.1</b> Part 1</a></li>
<li class="chapter" data-level="5.2" data-path="binary-boarding.html"><a href="binary-boarding.html#part-2-4"><i class="fa fa-check"></i><b>5.2</b> Part 2</a></li>
<li class="chapter" data-level="5.3" data-path="binary-boarding.html"><a href="binary-boarding.html#extra-solving-algebraicly"><i class="fa fa-check"></i><b>5.3</b> Extra: Solving algebraicly</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="custom-customs.html"><a href="custom-customs.html"><i class="fa fa-check"></i><b>6</b> Custom Customs</a><ul>
<li class="chapter" data-level="6.1" data-path="custom-customs.html"><a href="custom-customs.html#part-1-5"><i class="fa fa-check"></i><b>6.1</b> Part 1</a></li>
<li class="chapter" data-level="6.2" data-path="custom-customs.html"><a href="custom-customs.html#part-2-5"><i class="fa fa-check"></i><b>6.2</b> Part 2</a></li>
<li class="chapter" data-level="6.3" data-path="custom-customs.html"><a href="custom-customs.html#extra-solving-part-1-2-with-set-functions"><i class="fa fa-check"></i><b>6.3</b> Extra: solving part 1 &amp; 2 with set functions</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="handy-haversacks.html"><a href="handy-haversacks.html"><i class="fa fa-check"></i><b>7</b> Handy Haversacks</a><ul>
<li class="chapter" data-level="7.1" data-path="handy-haversacks.html"><a href="handy-haversacks.html#part-1-6"><i class="fa fa-check"></i><b>7.1</b> Part 1</a></li>
<li class="chapter" data-level="7.2" data-path="handy-haversacks.html"><a href="handy-haversacks.html#part-2-6"><i class="fa fa-check"></i><b>7.2</b> Part 2</a></li>
<li class="chapter" data-level="7.3" data-path="handy-haversacks.html"><a href="handy-haversacks.html#extra-alternative-solution-to-part-2"><i class="fa fa-check"></i><b>7.3</b> Extra: alternative solution to part 2</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="handheld-halting.html"><a href="handheld-halting.html"><i class="fa fa-check"></i><b>8</b> Handheld Halting</a><ul>
<li class="chapter" data-level="8.1" data-path="handheld-halting.html"><a href="handheld-halting.html#part-1-7"><i class="fa fa-check"></i><b>8.1</b> Part 1</a></li>
<li class="chapter" data-level="8.2" data-path="handheld-halting.html"><a href="handheld-halting.html#part-2-7"><i class="fa fa-check"></i><b>8.2</b> Part 2</a></li>
<li class="chapter" data-level="8.3" data-path="handheld-halting.html"><a href="handheld-halting.html#extra-update-the-computer-class"><i class="fa fa-check"></i><b>8.3</b> Extra: update the computer class</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="encoding-error.html"><a href="encoding-error.html"><i class="fa fa-check"></i><b>9</b> Encoding Error</a><ul>
<li class="chapter" data-level="9.1" data-path="encoding-error.html"><a href="encoding-error.html#part-1-8"><i class="fa fa-check"></i><b>9.1</b> Part 1</a></li>
<li class="chapter" data-level="9.2" data-path="encoding-error.html"><a href="encoding-error.html#part-2-8"><i class="fa fa-check"></i><b>9.2</b> Part 2</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="adapter-array.html"><a href="adapter-array.html"><i class="fa fa-check"></i><b>10</b> Adapter Array</a><ul>
<li class="chapter" data-level="10.1" data-path="adapter-array.html"><a href="adapter-array.html#part-1-9"><i class="fa fa-check"></i><b>10.1</b> Part 1</a></li>
<li class="chapter" data-level="10.2" data-path="adapter-array.html"><a href="adapter-array.html#part-2-9"><i class="fa fa-check"></i><b>10.2</b> Part 2</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="seating-system.html"><a href="seating-system.html"><i class="fa fa-check"></i><b>11</b> Seating System</a><ul>
<li class="chapter" data-level="11.1" data-path="seating-system.html"><a href="seating-system.html#part-1-10"><i class="fa fa-check"></i><b>11.1</b> Part 1</a></li>
<li class="chapter" data-level="11.2" data-path="seating-system.html"><a href="seating-system.html#part-2-10"><i class="fa fa-check"></i><b>11.2</b> Part 2</a></li>
<li class="chapter" data-level="11.3" data-path="seating-system.html"><a href="seating-system.html#solving-faster"><i class="fa fa-check"></i><b>11.3</b> Solving faster</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="rain-risk.html"><a href="rain-risk.html"><i class="fa fa-check"></i><b>12</b> Rain Risk</a><ul>
<li class="chapter" data-level="12.1" data-path="rain-risk.html"><a href="rain-risk.html#part-1-11"><i class="fa fa-check"></i><b>12.1</b> Part 1</a></li>
<li class="chapter" data-level="12.2" data-path="rain-risk.html"><a href="rain-risk.html#part-2-11"><i class="fa fa-check"></i><b>12.2</b> Part 2</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="shuttle-search.html"><a href="shuttle-search.html"><i class="fa fa-check"></i><b>13</b> Shuttle Search</a><ul>
<li class="chapter" data-level="13.1" data-path="shuttle-search.html"><a href="shuttle-search.html#part-1-12"><i class="fa fa-check"></i><b>13.1</b> Part 1</a></li>
<li class="chapter" data-level="13.2" data-path="shuttle-search.html"><a href="shuttle-search.html#part-2-12"><i class="fa fa-check"></i><b>13.2</b> Part 2</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="docking-data.html"><a href="docking-data.html"><i class="fa fa-check"></i><b>14</b> Docking Data</a><ul>
<li class="chapter" data-level="14.1" data-path="docking-data.html"><a href="docking-data.html#part-1-13"><i class="fa fa-check"></i><b>14.1</b> Part 1</a></li>
<li class="chapter" data-level="14.2" data-path="docking-data.html"><a href="docking-data.html#part-2-13"><i class="fa fa-check"></i><b>14.2</b> Part 2</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="rambunctious-recitation.html"><a href="rambunctious-recitation.html"><i class="fa fa-check"></i><b>15</b> Rambunctious Recitation</a><ul>
<li class="chapter" data-level="15.1" data-path="rambunctious-recitation.html"><a href="rambunctious-recitation.html#part-1-14"><i class="fa fa-check"></i><b>15.1</b> Part 1</a></li>
<li class="chapter" data-level="15.2" data-path="rambunctious-recitation.html"><a href="rambunctious-recitation.html#part-2-14"><i class="fa fa-check"></i><b>15.2</b> Part 2</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="ticket-translation.html"><a href="ticket-translation.html"><i class="fa fa-check"></i><b>16</b> Ticket Translation</a><ul>
<li class="chapter" data-level="16.1" data-path="ticket-translation.html"><a href="ticket-translation.html#part-1-15"><i class="fa fa-check"></i><b>16.1</b> Part 1</a></li>
<li class="chapter" data-level="16.2" data-path="ticket-translation.html"><a href="ticket-translation.html#part-2-15"><i class="fa fa-check"></i><b>16.2</b> Part 2</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="conway-cubes.html"><a href="conway-cubes.html"><i class="fa fa-check"></i><b>17</b> Conway Cubes</a><ul>
<li class="chapter" data-level="17.1" data-path="conway-cubes.html"><a href="conway-cubes.html#part-1-16"><i class="fa fa-check"></i><b>17.1</b> Part 1</a></li>
<li class="chapter" data-level="17.2" data-path="conway-cubes.html"><a href="conway-cubes.html#part-2-16"><i class="fa fa-check"></i><b>17.2</b> Part 2</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="operation-order.html"><a href="operation-order.html"><i class="fa fa-check"></i><b>18</b> Operation Order</a><ul>
<li class="chapter" data-level="18.1" data-path="operation-order.html"><a href="operation-order.html#part-1-17"><i class="fa fa-check"></i><b>18.1</b> Part 1</a></li>
<li class="chapter" data-level="18.2" data-path="operation-order.html"><a href="operation-order.html#part-2-17"><i class="fa fa-check"></i><b>18.2</b> Part 2</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="monster-messages.html"><a href="monster-messages.html"><i class="fa fa-check"></i><b>19</b> Monster Messages</a><ul>
<li class="chapter" data-level="19.1" data-path="monster-messages.html"><a href="monster-messages.html#part-1-18"><i class="fa fa-check"></i><b>19.1</b> Part 1</a></li>
<li class="chapter" data-level="19.2" data-path="monster-messages.html"><a href="monster-messages.html#part-2-18"><i class="fa fa-check"></i><b>19.2</b> Part 2</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="jurassic-jigsaw.html"><a href="jurassic-jigsaw.html"><i class="fa fa-check"></i><b>20</b> Jurassic Jigsaw</a><ul>
<li class="chapter" data-level="20.1" data-path="jurassic-jigsaw.html"><a href="jurassic-jigsaw.html#part-1-19"><i class="fa fa-check"></i><b>20.1</b> Part 1</a></li>
<li class="chapter" data-level="20.2" data-path="jurassic-jigsaw.html"><a href="jurassic-jigsaw.html#part-2-19"><i class="fa fa-check"></i><b>20.2</b> Part 2</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="allergen-assessment.html"><a href="allergen-assessment.html"><i class="fa fa-check"></i><b>21</b> Allergen Assessment</a><ul>
<li class="chapter" data-level="21.1" data-path="allergen-assessment.html"><a href="allergen-assessment.html#part-1-20"><i class="fa fa-check"></i><b>21.1</b> Part 1</a></li>
<li class="chapter" data-level="21.2" data-path="allergen-assessment.html"><a href="allergen-assessment.html#part-2-20"><i class="fa fa-check"></i><b>21.2</b> Part 2</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="crab-combat.html"><a href="crab-combat.html"><i class="fa fa-check"></i><b>22</b> Crab Combat</a><ul>
<li class="chapter" data-level="22.1" data-path="crab-combat.html"><a href="crab-combat.html#part-1-21"><i class="fa fa-check"></i><b>22.1</b> Part 1</a></li>
<li class="chapter" data-level="22.2" data-path="crab-combat.html"><a href="crab-combat.html#part-2-21"><i class="fa fa-check"></i><b>22.2</b> Part 2</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="crab-cups.html"><a href="crab-cups.html"><i class="fa fa-check"></i><b>23</b> Crab Cups</a><ul>
<li class="chapter" data-level="23.1" data-path="crab-cups.html"><a href="crab-cups.html#part-1-22"><i class="fa fa-check"></i><b>23.1</b> Part 1</a></li>
<li class="chapter" data-level="23.2" data-path="crab-cups.html"><a href="crab-cups.html#part-2-22"><i class="fa fa-check"></i><b>23.2</b> Part 2</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="combo-breaker.html"><a href="combo-breaker.html"><i class="fa fa-check"></i><b>24</b> Combo Breaker</a><ul>
<li class="chapter" data-level="24.1" data-path="combo-breaker.html"><a href="combo-breaker.html#part-1-23"><i class="fa fa-check"></i><b>24.1</b> Part 1</a></li>
<li class="chapter" data-level="24.2" data-path="combo-breaker.html"><a href="combo-breaker.html#part-2-23"><i class="fa fa-check"></i><b>24.2</b> Part 2</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Advent of Code 2020</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="operation-order" class="section level1">
<h1><span class="header-section-number">Day 18</span> Operation Order</h1>
<p>This is my attempt to solve <a href="https://adventofcode.com/2020/day/18">Day 18</a>.</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="operation-order.html#cb309-1"></a>sample &lt;-<span class="st"> </span><span class="kw">read_lines</span>(<span class="st">&quot;samples/day_18_sample.txt&quot;</span>)</span>
<span id="cb309-2"><a href="operation-order.html#cb309-2"></a>actual &lt;-<span class="st"> </span><span class="kw">read_lines</span>(<span class="st">&quot;inputs/day_18_input.txt&quot;</span>)</span></code></pre></div>
<div id="part-1-17" class="section level2">
<h2><span class="header-section-number">18.1</span> Part 1</h2>
<p>First I think it would be useful to have a <a href="https://en.wikipedia.org/wiki/Stack_(abstract_data_type)">stack</a> to solve
todayâ€™s problem. This is pretty simple to construct using R6. Here I use a fixed stack size (default to 100).</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="operation-order.html#cb310-1"></a>Stack &lt;-<span class="st"> </span><span class="kw">R6Class</span>(</span>
<span id="cb310-2"><a href="operation-order.html#cb310-2"></a>  <span class="st">&quot;Stack&quot;</span>,</span>
<span id="cb310-3"><a href="operation-order.html#cb310-3"></a>  <span class="dt">public =</span> <span class="kw">list</span>(</span>
<span id="cb310-4"><a href="operation-order.html#cb310-4"></a>    <span class="dt">initialize =</span> <span class="cf">function</span>(<span class="dt">stack_size =</span> <span class="dv">100</span>) {</span>
<span id="cb310-5"><a href="operation-order.html#cb310-5"></a>      private<span class="op">$</span>stack &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">&quot;list&quot;</span>, stack_size)</span>
<span id="cb310-6"><a href="operation-order.html#cb310-6"></a>      private<span class="op">$</span>stack_size &lt;-<span class="st"> </span>stack_size</span>
<span id="cb310-7"><a href="operation-order.html#cb310-7"></a>    },</span>
<span id="cb310-8"><a href="operation-order.html#cb310-8"></a>    <span class="dt">push =</span> <span class="cf">function</span>(v) {</span>
<span id="cb310-9"><a href="operation-order.html#cb310-9"></a>      <span class="cf">if</span> (self<span class="op">$</span><span class="kw">is_full</span>()) {</span>
<span id="cb310-10"><a href="operation-order.html#cb310-10"></a>        <span class="kw">stop</span>(<span class="st">&quot;stack is full&quot;</span>)</span>
<span id="cb310-11"><a href="operation-order.html#cb310-11"></a>      }</span>
<span id="cb310-12"><a href="operation-order.html#cb310-12"></a>      private<span class="op">$</span>ptr &lt;-<span class="st"> </span>private<span class="op">$</span>ptr <span class="op">+</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb310-13"><a href="operation-order.html#cb310-13"></a>      private<span class="op">$</span>stack[[private<span class="op">$</span>ptr]] &lt;-<span class="st"> </span>v</span>
<span id="cb310-14"><a href="operation-order.html#cb310-14"></a>    },</span>
<span id="cb310-15"><a href="operation-order.html#cb310-15"></a>    <span class="dt">pop =</span> <span class="cf">function</span>() {</span>
<span id="cb310-16"><a href="operation-order.html#cb310-16"></a>      <span class="cf">if</span> (self<span class="op">$</span><span class="kw">is_empty</span>()) {</span>
<span id="cb310-17"><a href="operation-order.html#cb310-17"></a>        <span class="kw">stop</span>(<span class="st">&quot;no items in stack&quot;</span>)</span>
<span id="cb310-18"><a href="operation-order.html#cb310-18"></a>      }</span>
<span id="cb310-19"><a href="operation-order.html#cb310-19"></a>      v &lt;-<span class="st"> </span>private<span class="op">$</span>stack[[private<span class="op">$</span>ptr]]</span>
<span id="cb310-20"><a href="operation-order.html#cb310-20"></a>      private<span class="op">$</span>ptr &lt;-<span class="st"> </span>private<span class="op">$</span>ptr <span class="op">-</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb310-21"><a href="operation-order.html#cb310-21"></a>      v</span>
<span id="cb310-22"><a href="operation-order.html#cb310-22"></a>    },</span>
<span id="cb310-23"><a href="operation-order.html#cb310-23"></a>    <span class="dt">is_empty =</span> <span class="cf">function</span>() {</span>
<span id="cb310-24"><a href="operation-order.html#cb310-24"></a>      private<span class="op">$</span>ptr <span class="op">==</span><span class="st"> </span><span class="dv">0</span></span>
<span id="cb310-25"><a href="operation-order.html#cb310-25"></a>    },</span>
<span id="cb310-26"><a href="operation-order.html#cb310-26"></a>    <span class="dt">is_full =</span> <span class="cf">function</span>() {</span>
<span id="cb310-27"><a href="operation-order.html#cb310-27"></a>      private<span class="op">$</span>ptr <span class="op">==</span><span class="st"> </span>private<span class="op">$</span>stack_size</span>
<span id="cb310-28"><a href="operation-order.html#cb310-28"></a>    }</span>
<span id="cb310-29"><a href="operation-order.html#cb310-29"></a>  ),</span>
<span id="cb310-30"><a href="operation-order.html#cb310-30"></a>  <span class="dt">private =</span> <span class="kw">list</span>(</span>
<span id="cb310-31"><a href="operation-order.html#cb310-31"></a>    <span class="dt">ptr =</span> <span class="dv">0</span>,</span>
<span id="cb310-32"><a href="operation-order.html#cb310-32"></a>    <span class="dt">stack_size =</span> <span class="dv">0</span>,</span>
<span id="cb310-33"><a href="operation-order.html#cb310-33"></a>    <span class="dt">stack =</span> <span class="ot">NULL</span></span>
<span id="cb310-34"><a href="operation-order.html#cb310-34"></a>  )</span>
<span id="cb310-35"><a href="operation-order.html#cb310-35"></a>)</span></code></pre></div>
<p>We can then create a function which will step through the input and add items to the stack. When we a function and a
value we can update an accumulator (which we default to 0). If we reach a <code>(</code> we can push the accumulator and function
to the stack and reset these to the defaults. When we reach a <code>)</code> we can pop the values off the stack and start using
these again.</p>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="operation-order.html#cb311-1"></a>part_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="cf">function</span>(input) {</span>
<span id="cb311-2"><a href="operation-order.html#cb311-2"></a>  part_<span class="dv">1</span>_parse &lt;-<span class="st"> </span><span class="cf">function</span>(input) {</span>
<span id="cb311-3"><a href="operation-order.html#cb311-3"></a>    stack &lt;-<span class="st"> </span>Stack<span class="op">$</span><span class="kw">new</span>()</span>
<span id="cb311-4"><a href="operation-order.html#cb311-4"></a>    </span>
<span id="cb311-5"><a href="operation-order.html#cb311-5"></a>    i &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb311-6"><a href="operation-order.html#cb311-6"></a>    acc &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb311-7"><a href="operation-order.html#cb311-7"></a>    fn &lt;-<span class="st"> `</span><span class="dt">+</span><span class="st">`</span></span>
<span id="cb311-8"><a href="operation-order.html#cb311-8"></a>    </span>
<span id="cb311-9"><a href="operation-order.html#cb311-9"></a>    <span class="cf">while</span> (i <span class="op">&lt;</span><span class="st"> </span><span class="kw">length</span>(input)) {</span>
<span id="cb311-10"><a href="operation-order.html#cb311-10"></a>      s &lt;-<span class="st"> </span>input[[(i &lt;-<span class="st"> </span>i <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)]]</span>
<span id="cb311-11"><a href="operation-order.html#cb311-11"></a>      <span class="cf">if</span> (s <span class="op">==</span><span class="st"> &quot;(&quot;</span>) {</span>
<span id="cb311-12"><a href="operation-order.html#cb311-12"></a>        stack<span class="op">$</span><span class="kw">push</span>(acc)</span>
<span id="cb311-13"><a href="operation-order.html#cb311-13"></a>        stack<span class="op">$</span><span class="kw">push</span>(fn)</span>
<span id="cb311-14"><a href="operation-order.html#cb311-14"></a>        </span>
<span id="cb311-15"><a href="operation-order.html#cb311-15"></a>        acc &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb311-16"><a href="operation-order.html#cb311-16"></a>        fn &lt;-<span class="st"> `</span><span class="dt">+</span><span class="st">`</span></span>
<span id="cb311-17"><a href="operation-order.html#cb311-17"></a>        <span class="cf">next</span>()</span>
<span id="cb311-18"><a href="operation-order.html#cb311-18"></a>      } <span class="cf">else</span> <span class="cf">if</span> (s <span class="op">==</span><span class="st"> &quot;)&quot;</span>) {</span>
<span id="cb311-19"><a href="operation-order.html#cb311-19"></a>        fn &lt;-<span class="st"> </span>stack<span class="op">$</span><span class="kw">pop</span>()</span>
<span id="cb311-20"><a href="operation-order.html#cb311-20"></a>        acc &lt;-<span class="st"> </span><span class="kw">fn</span>(stack<span class="op">$</span><span class="kw">pop</span>(), acc)</span>
<span id="cb311-21"><a href="operation-order.html#cb311-21"></a>      } <span class="cf">else</span> <span class="cf">if</span> (s <span class="op">==</span><span class="st"> &quot;+&quot;</span> <span class="op">|</span><span class="st"> </span>s <span class="op">==</span><span class="st"> &quot;*&quot;</span>) {</span>
<span id="cb311-22"><a href="operation-order.html#cb311-22"></a>        fn &lt;-<span class="st"> </span><span class="kw">get</span>(s)</span>
<span id="cb311-23"><a href="operation-order.html#cb311-23"></a>      } <span class="cf">else</span> {</span>
<span id="cb311-24"><a href="operation-order.html#cb311-24"></a>        acc &lt;-<span class="st"> </span><span class="kw">fn</span>(acc, <span class="kw">as.numeric</span>(s))</span>
<span id="cb311-25"><a href="operation-order.html#cb311-25"></a>      }</span>
<span id="cb311-26"><a href="operation-order.html#cb311-26"></a>    }</span>
<span id="cb311-27"><a href="operation-order.html#cb311-27"></a>    </span>
<span id="cb311-28"><a href="operation-order.html#cb311-28"></a>    acc</span>
<span id="cb311-29"><a href="operation-order.html#cb311-29"></a>  }</span>
<span id="cb311-30"><a href="operation-order.html#cb311-30"></a>  </span>
<span id="cb311-31"><a href="operation-order.html#cb311-31"></a>  input <span class="op">%&gt;%</span></span>
<span id="cb311-32"><a href="operation-order.html#cb311-32"></a><span class="st">    </span><span class="kw">str_replace_all</span>(<span class="st">&quot; &quot;</span>, <span class="st">&quot;&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb311-33"><a href="operation-order.html#cb311-33"></a><span class="st">    </span><span class="kw">str_extract_all</span>(<span class="st">&quot;.&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb311-34"><a href="operation-order.html#cb311-34"></a><span class="st">    </span><span class="kw">map_dbl</span>(part_<span class="dv">1</span>_parse)</span>
<span id="cb311-35"><a href="operation-order.html#cb311-35"></a>}</span></code></pre></div>
<p>We can now check out function matches the provided sample:</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="operation-order.html#cb312-1"></a><span class="kw">all</span>(<span class="kw">part_1</span>(sample) <span class="op">==</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">71</span>, <span class="dv">51</span>, <span class="dv">26</span>, <span class="dv">437</span>, <span class="dv">12240</span>, <span class="dv">13632</span>))</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>And we can run the function on the actual data.</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="operation-order.html#cb314-1"></a><span class="kw">sum</span>(<span class="kw">part_1</span>(actual))</span></code></pre></div>
<pre><code>## [1] 69490582260</code></pre>
</div>
<div id="part-2-17" class="section level2">
<h2><span class="header-section-number">18.2</span> Part 2</h2>
<p>Part 2 can make use of our stack again, but this time we first parse the data by iterating over and adding all of the
values we would like to multiply to the stack. We immediately run addition and add these values to the stack instead.</p>
<p>Our parse function this time is recursive, when we reach a <code>(</code> we call our function again to parse that block. This
returns the value of the accumulator and the position that we got up to.</p>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="operation-order.html#cb316-1"></a>part_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="cf">function</span>(input) {</span>
<span id="cb316-2"><a href="operation-order.html#cb316-2"></a>  part_<span class="dv">2</span>_parse &lt;-<span class="st"> </span><span class="cf">function</span>(input, <span class="dt">i =</span> <span class="dv">1</span>) {</span>
<span id="cb316-3"><a href="operation-order.html#cb316-3"></a>    stack &lt;-<span class="st"> </span>Stack<span class="op">$</span><span class="kw">new</span>()</span>
<span id="cb316-4"><a href="operation-order.html#cb316-4"></a>    </span>
<span id="cb316-5"><a href="operation-order.html#cb316-5"></a>    <span class="cf">while</span> (i <span class="op">&lt;=</span><span class="st"> </span><span class="kw">length</span>(input)) {</span>
<span id="cb316-6"><a href="operation-order.html#cb316-6"></a>      a &lt;-<span class="st"> </span>input[[i]]</span>
<span id="cb316-7"><a href="operation-order.html#cb316-7"></a>      </span>
<span id="cb316-8"><a href="operation-order.html#cb316-8"></a>      <span class="co"># we have found a bracket, escape loop</span></span>
<span id="cb316-9"><a href="operation-order.html#cb316-9"></a>      <span class="cf">if</span> (a <span class="op">==</span><span class="st"> &quot;)&quot;</span>) <span class="cf">break</span>()</span>
<span id="cb316-10"><a href="operation-order.html#cb316-10"></a>      </span>
<span id="cb316-11"><a href="operation-order.html#cb316-11"></a>      <span class="cf">if</span> (a <span class="op">==</span><span class="st"> &quot;(&quot;</span>) {</span>
<span id="cb316-12"><a href="operation-order.html#cb316-12"></a>        p &lt;-<span class="st"> </span><span class="kw">part_2_parse</span>(input, i <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)</span>
<span id="cb316-13"><a href="operation-order.html#cb316-13"></a>        <span class="co"># add value from inside bracket to stack</span></span>
<span id="cb316-14"><a href="operation-order.html#cb316-14"></a>        stack<span class="op">$</span><span class="kw">push</span>(<span class="kw">as.numeric</span>(p[[<span class="dv">1</span>]]))</span>
<span id="cb316-15"><a href="operation-order.html#cb316-15"></a>        <span class="co"># skip to matching parenthesis</span></span>
<span id="cb316-16"><a href="operation-order.html#cb316-16"></a>        i &lt;-<span class="st"> </span>p[[<span class="dv">2</span>]]</span>
<span id="cb316-17"><a href="operation-order.html#cb316-17"></a>      } <span class="cf">else</span> <span class="cf">if</span> (a <span class="op">==</span><span class="st"> &quot;+&quot;</span>) {</span>
<span id="cb316-18"><a href="operation-order.html#cb316-18"></a>        i &lt;-<span class="st"> </span>i <span class="op">+</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb316-19"><a href="operation-order.html#cb316-19"></a>        b &lt;-<span class="st"> </span>input[[i]]</span>
<span id="cb316-20"><a href="operation-order.html#cb316-20"></a>        <span class="cf">if</span> (b <span class="op">==</span><span class="st"> &quot;(&quot;</span>) {</span>
<span id="cb316-21"><a href="operation-order.html#cb316-21"></a>          p &lt;-<span class="st"> </span><span class="kw">part_2_parse</span>(input, i <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)</span>
<span id="cb316-22"><a href="operation-order.html#cb316-22"></a>          b &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(p<span class="op">$</span>acc)</span>
<span id="cb316-23"><a href="operation-order.html#cb316-23"></a>          i &lt;-<span class="st"> </span>p<span class="op">$</span>i</span>
<span id="cb316-24"><a href="operation-order.html#cb316-24"></a>        }</span>
<span id="cb316-25"><a href="operation-order.html#cb316-25"></a>        av &lt;-<span class="st"> </span>stack<span class="op">$</span><span class="kw">pop</span>()</span>
<span id="cb316-26"><a href="operation-order.html#cb316-26"></a>        bv &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(b)</span>
<span id="cb316-27"><a href="operation-order.html#cb316-27"></a>        stack<span class="op">$</span><span class="kw">push</span>(av <span class="op">+</span><span class="st"> </span>bv)</span>
<span id="cb316-28"><a href="operation-order.html#cb316-28"></a>      } <span class="cf">else</span> <span class="cf">if</span> (a <span class="op">==</span><span class="st"> &quot;*&quot;</span>) {</span>
<span id="cb316-29"><a href="operation-order.html#cb316-29"></a>        i &lt;-<span class="st"> </span>i <span class="op">+</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb316-30"><a href="operation-order.html#cb316-30"></a>        b &lt;-<span class="st"> </span>input[[i]]</span>
<span id="cb316-31"><a href="operation-order.html#cb316-31"></a>        <span class="cf">if</span> (b <span class="op">==</span><span class="st"> &quot;(&quot;</span>) {</span>
<span id="cb316-32"><a href="operation-order.html#cb316-32"></a>          p &lt;-<span class="st"> </span><span class="kw">part_2_parse</span>(input, i <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)</span>
<span id="cb316-33"><a href="operation-order.html#cb316-33"></a>          b &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(p<span class="op">$</span>acc)</span>
<span id="cb316-34"><a href="operation-order.html#cb316-34"></a>          i &lt;-<span class="st"> </span>p<span class="op">$</span>i</span>
<span id="cb316-35"><a href="operation-order.html#cb316-35"></a>        }</span>
<span id="cb316-36"><a href="operation-order.html#cb316-36"></a>        bv &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(b)</span>
<span id="cb316-37"><a href="operation-order.html#cb316-37"></a>        stack<span class="op">$</span><span class="kw">push</span>(bv)</span>
<span id="cb316-38"><a href="operation-order.html#cb316-38"></a>      } <span class="cf">else</span> {</span>
<span id="cb316-39"><a href="operation-order.html#cb316-39"></a>        stack<span class="op">$</span><span class="kw">push</span>(<span class="kw">as.numeric</span>(a))</span>
<span id="cb316-40"><a href="operation-order.html#cb316-40"></a>      }</span>
<span id="cb316-41"><a href="operation-order.html#cb316-41"></a>      </span>
<span id="cb316-42"><a href="operation-order.html#cb316-42"></a>      i &lt;-<span class="st"> </span>i <span class="op">+</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb316-43"><a href="operation-order.html#cb316-43"></a>    }</span>
<span id="cb316-44"><a href="operation-order.html#cb316-44"></a>    </span>
<span id="cb316-45"><a href="operation-order.html#cb316-45"></a>    acc &lt;-<span class="st"> </span><span class="dv">1</span></span>
<span id="cb316-46"><a href="operation-order.html#cb316-46"></a>    <span class="cf">while</span> (<span class="op">!</span>stack<span class="op">$</span><span class="kw">is_empty</span>()) {</span>
<span id="cb316-47"><a href="operation-order.html#cb316-47"></a>      acc &lt;-<span class="st"> </span>acc <span class="op">*</span><span class="st"> </span>stack<span class="op">$</span><span class="kw">pop</span>()</span>
<span id="cb316-48"><a href="operation-order.html#cb316-48"></a>    }</span>
<span id="cb316-49"><a href="operation-order.html#cb316-49"></a>    </span>
<span id="cb316-50"><a href="operation-order.html#cb316-50"></a>    <span class="co"># return the accumulated value and the index we got to</span></span>
<span id="cb316-51"><a href="operation-order.html#cb316-51"></a>    <span class="kw">list</span>(<span class="dt">acc =</span> acc, <span class="dt">i =</span> i)</span>
<span id="cb316-52"><a href="operation-order.html#cb316-52"></a>  }</span>
<span id="cb316-53"><a href="operation-order.html#cb316-53"></a>  </span>
<span id="cb316-54"><a href="operation-order.html#cb316-54"></a>  input <span class="op">%&gt;%</span></span>
<span id="cb316-55"><a href="operation-order.html#cb316-55"></a><span class="st">    </span><span class="kw">str_replace_all</span>(<span class="st">&quot; &quot;</span>, <span class="st">&quot;&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb316-56"><a href="operation-order.html#cb316-56"></a><span class="st">    </span><span class="kw">str_extract_all</span>(<span class="st">&quot;.&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb316-57"><a href="operation-order.html#cb316-57"></a><span class="st">    </span><span class="kw">map</span>(part_<span class="dv">2</span>_parse) <span class="op">%&gt;%</span></span>
<span id="cb316-58"><a href="operation-order.html#cb316-58"></a><span class="st">    </span><span class="kw">map_dbl</span>(<span class="st">&quot;acc&quot;</span>)</span>
<span id="cb316-59"><a href="operation-order.html#cb316-59"></a>}</span></code></pre></div>
<p>We can now check out function matches the provided sample:</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="operation-order.html#cb317-1"></a><span class="kw">all</span>(<span class="kw">part_2</span>(sample) <span class="op">==</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">231</span>, <span class="dv">51</span>, <span class="dv">46</span>, <span class="dv">1445</span>, <span class="dv">669060</span>, <span class="dv">23340</span>))</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>And we can run the function on the actual data.</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="operation-order.html#cb319-1"></a><span class="kw">sum</span>(<span class="kw">part_2</span>(actual))</span></code></pre></div>
<pre><code>## [1] 362464596624526</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="conway-cubes.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="monster-messages.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
